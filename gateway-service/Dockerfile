FROM openjdk:17-jdk

ARG GATEWAY_PORT
ARG AUTH_SERVICE_URI
ARG EVENT_SERVICE_URI
ARG SEAT_SERVICE_URI
ARG TICKET_SERVICE_URI
ARG PAYMENT_SERVICE_URI
ARG INTERNAL_SERVICE_URI

ARG AUTH_SERVICE_INTERNAL_URL

ARG AUTH_SERVICE_NAME
ARG CACHE_EXPIRATION
ARG CACHE_MAX_SIZE

ENV GATEWAY_PORT=${GATEWAY_PORT}
ENV AUTH_SERVICE_URI=${AUTH_SERVICE_URI}
ENV EVENT_SERVICE_URI=${EVENT_SERVICE_URI}
ENV SEAT_SERVICE_URI=${SEAT_SERVICE_URI}
ENV TICKET_SERVICE_URI=${TICKET_SERVICE_URI}
ENV PAYMENT_SERVICE_URI=${PAYMENT_SERVICE_URI}
ENV INTERNAL_SERVICE_URI=${INTERNAL_SERVICE_URI}
ENV AUTH_SERVICE_INTERNAL_URL=${AUTH_SERVICE_INTERNAL_URL}
ENV AUTH_SERVICE_NAME=${AUTH_SERVICE_NAME}
ENV CACHE_EXPIRATION=${CACHE_EXPIRATION}
ENV CACHE_MAX_SIZE=${CACHE_MAX_SIZE}

WORKDIR /ipho

COPY build/libs/gateway-service.jar /ipho/gateway-service.jar

ENTRYPOINT ["java", "-jar", "/ipho/gateway-service.jar"]